<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head">
    <title>Chronopolis Ingestion Service</title>
</head>
<body>
<nav th:replace="layout :: navbar"></nav>
<div class="d-flex flex-column align-items-center m-3">
    <div class="card w-75">
        <nav th:replace="fragments/crumbs/repl :: edit"></nav>
        <div class="card-body">
            <div align="center" class="error" th:text="${message}"></div>
            <h6>Update Chronopolis Reolication</h6>
            <div style="border: 0.2rem solid #f7f7f9; padding: 1.5rem;">
                <form method="post" name="replication" th:object="${replicationEdit}">
                    <dl>
                        <dt>
                            <div class="form-group row">
                                <label for="collection" class="col-form-label">Collection</label>
                                <input class="form-control" type="input" name="collection" id="collection" th:value="${replication.bag.name}" disabled/>
                            </div>
                        </dt>
                        <dt>
                            <div class="form-group row">
                                <label for="nodes" class="col-form-label">Replicating Nodes</label>
                                <!--/*@thymesVar id="nodes" type="List<org.chronopolis.rest.entities.Node>"*/-->
                                <select class="form-control" name="node" id="node" disabled>
                                    <option th:each="node: ${nodes}"
                                            th:value="${node.id}" th:text="${node.username}"
                                            th:selected="${node.id == replication.node.id}">
                                    </option>
                                </select>
                            </div>
                        </dt>

                        <dt>
                            <div class="form-group row">
                                <label for="nodes" class="col-form-label">Replicating Status</label>
                                <!--/*@thymesVar id="statuses" type="List<org.chronopolis.rest.models.enums.ReplicationStatus>"*/-->
                                <select class="form-control" name="status" id="status">
                                    <option th:each="status: ${statuses}"
                                            th:value="${status}" th:text="${status}"
                                            th:selected="${status == replication.status}">
                                    </option>
                                </select>
                            </div>
                        </dt>
                    </dl>

                    <div class="modal-footer">
                        <input class="btn btn-primary" type="submit" value="Update Replication"/>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div th:replace="layout :: foot"></div>
</div>

<script type="text/javascript">
    $('#rm-modal').on('show.bs.modal', function (event) {
        var target = $(event.relatedTarget);
        var href = target.data('href');
        var message = target.data('message');

        var modal = $(this);
        modal.find('.btn-danger').attr('href', href);
        modal.find('.modal-body').text(message);
    });
</script>
</body>
</html>